# ğŸº Werewolf Game Judge

**ç‹¼äººæ€ç¬¬ä¸€æ™šç”µå­æ³•å®˜** - ä¸“ä¸ºçº¿ä¸‹åŒæ¡Œç‹¼äººæ€è®¾è®¡çš„è‡ªåŠ¨åŒ–è£åˆ¤ App

[![Live Demo](https://img.shields.io/badge/Live-werewolf--judge.vercel.app-blue?style=flat-square)](https://werewolf-judge.vercel.app)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.3-blue?style=flat-square&logo=typescript)](https://www.typescriptlang.org/)
[![React Native](https://img.shields.io/badge/React%20Native-Expo-purple?style=flat-square&logo=expo)](https://expo.dev/)
[![Supabase](https://img.shields.io/badge/Supabase-Realtime-green?style=flat-square&logo=supabase)](https://supabase.com/)

---

## âœ¨ æ ¸å¿ƒç‰¹æ€§

- ğŸ™ï¸ **è‡ªåŠ¨è¯­éŸ³æ’­æŠ¥** - ç¬¬ä¸€æ™šå…¨æµç¨‹è‡ªåŠ¨å¼•å¯¼ï¼ŒHost ä¹Ÿèƒ½é—­çœ¼å‚ä¸
- ğŸ“± **å¤šè®¾å¤‡åŒæ­¥** - ä¸€äººå»ºæˆ¿ï¼Œå¤šäººæ‰«ç åŠ å…¥ï¼Œå®æ—¶åŒæ­¥
- ï¿½ï¿½ **ä¸°å¯Œè§’è‰²** - æ”¯æŒ 20+ è§’è‰²ï¼Œå«ç‹¼äººã€é¢„è¨€å®¶ã€å¥³å·«ã€å®ˆå«ç­‰
- âš¡ **å³å¼€å³ç”¨** - åŒ¿åç™»å½•ï¼Œæ— éœ€æ³¨å†Œï¼Œ4ä½æˆ¿é—´ç å¿«é€ŸåŠ å…¥
- ğŸŒ **è·¨å¹³å°** - iOS / Android / Web å…¨å¹³å°æ”¯æŒ

---

## ğŸ® å¿«é€Ÿå¼€å§‹

### ç©å®¶ä½¿ç”¨

| æ­¥éª¤ | Hostï¼ˆæˆ¿ä¸»ï¼‰                             | ç©å®¶             |
| ---- | ---------------------------------------- | ---------------- |
| 1    | ç‚¹å‡»ã€Œåˆ›å»ºæˆ¿é—´ã€ï¼Œé€‰æ‹©æ¿å­å’Œäººæ•°         | ç‚¹å‡»ã€Œè¿›å…¥æˆ¿é—´ã€ |
| 2    | åˆ†äº« 4 ä½æˆ¿é—´å·ç»™å…¶ä»–ç©å®¶                | è¾“å…¥æˆ¿é—´å·åŠ å…¥   |
| 3    | ç­‰å¾…æ‰€æœ‰äººå…¥åº§ï¼Œç‚¹å‡»ã€Œå‡†å¤‡çœ‹ç‰Œã€         | ç‚¹å‡»åº§ä½å…¥åº§     |
| 4    | æ‰€æœ‰äººçœ‹ç‰Œåï¼Œç‚¹å‡»ã€Œå¼€å§‹æ¸¸æˆã€           | æŸ¥çœ‹èº«ä»½ï¼Œç¡®è®¤   |
| 5    | å¤œæ™šç»“æŸåï¼Œç‚¹å‡»ã€ŒæŸ¥çœ‹æ˜¨æ™šä¿¡æ¯ã€å®£å¸ƒç»“æœ | æ ¹æ®èº«ä»½æ‰§è¡Œè¡ŒåŠ¨ |

> ğŸ’¡ ç™½å¤©å‘è¨€ä¸æŠ•ç¥¨åœ¨çº¿ä¸‹è¿›è¡Œï¼ŒApp åªè´Ÿè´£ç¬¬ä¸€æ™šã€‚

### çº¿ä¸Šä½“éªŒ

ğŸ‘‰ **[werewolf-judge.vercel.app](https://werewolf-judge.vercel.app)**

---

## ğŸº æ”¯æŒè§’è‰²

| ç‹¼äººé˜µè¥ | ç¥èŒé˜µè¥ | æ‘æ°‘é˜µè¥ |
| -------- | -------- | -------- |
| ç‹¼äºº     | é¢„è¨€å®¶   | æ‘æ°‘     |
| ç‹¼ç‹     | å¥³å·«     |          |
| ç‹¼å     | çŒäºº     |          |
| æœºæ¢°ç‹¼   | å®ˆå«     |          |
| æ¶çµéª‘å£« | éª‘å£«     |          |
| æš—ç‹¼ç‹   | ç™½ç—´     |          |
|          | é­”æœ¯å¸ˆ   |          |
|          | é€šçµå¸ˆ   |          |
|          | çŸ³åƒé¬¼   |          |
|          | æ¢¦é­‡     |          |
|          | å®ˆå¢“äºº   |          |

---

## ğŸ—ï¸ æ¶æ„è®¾è®¡

**æ ¸å¿ƒåŸåˆ™ï¼šHost æ˜¯å”¯ä¸€æƒå¨**

- âœ… Host æœ¬åœ°å†…å­˜æ§åˆ¶æ‰€æœ‰æ¸¸æˆé€»è¾‘
- âœ… Supabase åªåšä¼ è¾“/å‘ç°/èº«ä»½
- âœ… æ•æ„Ÿä¿¡æ¯é€šè¿‡ç§ä¿¡å‘é€ï¼Œä¸å…¬å¼€å¹¿æ’­

```
Host è®¾å¤‡ (GameStateService)
    â”‚
    â”‚ Realtime Broadcast
    â–¼
Supabase (ä¼ è¾“å±‚)
    â”‚
    â–¼
ç©å®¶è®¾å¤‡ (Nä¸ª)
```

---

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### ç¯å¢ƒè¦æ±‚

- Node.js >= 20
- npm æˆ– yarn
- Expo CLI
- Supabase CLI

### æœ¬åœ°å¼€å‘

```bash
# 1. å®‰è£…ä¾èµ–
npm install

# 2. å¯åŠ¨æœ¬åœ° Supabase
supabase start

# 3. é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env

# 4. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm start

# 5. è¿è¡Œæµ‹è¯•
npm test                    # å•å…ƒæµ‹è¯• (Jest)
npm run e2e:core            # E2E æµ‹è¯• (Playwright)
```

### åˆ‡æ¢ Supabase ç¯å¢ƒ

| ç¯å¢ƒ              | æ“ä½œ                               |
| ----------------- | ---------------------------------- |
| **æœ¬åœ° Supabase** | åˆ›å»º `.env.local` æ–‡ä»¶ï¼ˆè§ä¸‹æ–¹ï¼‰   |
| **è¿œç¨‹ Supabase** | åˆ é™¤ `.env.local`ï¼Œè‡ªåŠ¨ä½¿ç”¨ `.env` |

**ä½¿ç”¨æœ¬åœ° Supabaseï¼š**

```bash
# 1. å¯åŠ¨æœ¬åœ° Supabase
supabase start

# 2. åˆ›å»º .env.localï¼ˆExpo ä¼˜å…ˆè¯»å–ï¼‰
cat > .env.local << 'EOF'
EXPO_PUBLIC_SUPABASE_URL=http://127.0.0.1:54321
EXPO_PUBLIC_SUPABASE_ANON_KEY=<your-local-anon-key>
EOF

# è·å–æœ¬åœ° anon key
supabase status | grep anon
```

**åˆ‡æ¢å›è¿œç¨‹ Supabaseï¼š**

```bash
rm .env.local
# é‡å¯ Metro bundler (Ctrl+C å npm start)
```

> ğŸ’¡ Expo ç¯å¢ƒå˜é‡ä¼˜å…ˆçº§ï¼š`.env.local` > `.env`

### é¡¹ç›®ç»“æ„

```
src/
â”œâ”€â”€ models/roles/spec/     # è§’è‰²å®šä¹‰ (å£°æ˜å¼)
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ GameStateService.ts    # Host æ¸¸æˆçŠ¶æ€æœº (æ ¸å¿ƒ)
â”‚   â”œâ”€â”€ night/resolvers/       # å¤œæ™šè¡ŒåŠ¨è§£æå™¨
â”‚   â””â”€â”€ DeathCalculator.ts     # æ­»äº¡ç»“ç®—
â”œâ”€â”€ screens/               # é¡µé¢ç»„ä»¶
â””â”€â”€ hooks/                 # React Hooks
```

---

## ğŸš€ éƒ¨ç½²

### 1. é…ç½®è¿œç¨‹ Supabase

```bash
supabase link --project-ref <your-project-ref>
supabase db push
supabase projects api-keys --project-ref <your-project-ref>
```

### 2. æ›´æ–°ç¯å¢ƒå˜é‡

```env
EXPO_PUBLIC_SUPABASE_URL=https://<your-project-ref>.supabase.co
EXPO_PUBLIC_SUPABASE_ANON_KEY=<your-anon-key>
```

### 3. æ„å»º & éƒ¨ç½² Web

```bash
npx expo export --platform web
vercel deploy dist --prod
```

**å½“å‰ç”Ÿäº§ç¯å¢ƒï¼š** https://werewolf-judge.vercel.app

---

## ğŸ“– æ›´å¤šæ–‡æ¡£

| æ–‡æ¡£                                | è¯´æ˜                           |
| ----------------------------------- | ------------------------------ |
| [çº¿ä¸‹ç©æ³• SOP](docs/offline-sop.md) | å®Œæ•´çš„çº¿ä¸‹æ¸¸æˆæµç¨‹æŒ‡å—         |
| [éƒ¨ç½²æŒ‡å—](docs/DEPLOYMENT.md)      | Supabase + Vercel å®Œæ•´éƒ¨ç½²æµç¨‹ |

---

## ğŸ“„ License

MIT
